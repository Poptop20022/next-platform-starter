# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º "Failed to fetch"

## –ü—Ä–æ–±–ª–µ–º–∞: "Failed to fetch" –ø—Ä–∏ –≤—Ö–æ–¥–µ

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ frontend –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ backend API.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ –ø–æ —à–∞–≥–∞–º:

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Backend —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ URL –≤–∞—à–µ–≥–æ backend (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://your-backend.railway.app/api/health`)

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON:
```json
{"status":"ok","timestamp":"..."}
```

**–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Railway/Render Dashboard
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ NEXT_PUBLIC_API_URL –≤ Netlify

**–í Netlify Dashboard:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à —Å–∞–π—Ç
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Site settings** ‚Üí **Environment variables**
3. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
   - **Key:** `NEXT_PUBLIC_API_URL`
   - **Value:** `https://your-backend.railway.app` (URL –≤–∞—à–µ–≥–æ backend –ë–ï–ó —Å–ª–µ—à–∞ –≤ –∫–æ–Ω—Ü–µ)
4. **–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω—É–∂–Ω–æ **–ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Å–∞–π—Ç**:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Deploys**
   - –ù–∞–∂–º–∏—Ç–µ **Trigger deploy** ‚Üí **Clear cache and deploy site**

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞ Backend

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à Netlify –¥–æ–º–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ CORS.

–í `backend/src/index.ts` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞—à –¥–æ–º–µ–Ω:
```typescript
const allowedOrigins = [
  'http://localhost:3000',
  'https://tehnogrupp.netlify.app',  // ‚Üê –í–∞—à –¥–æ–º–µ–Ω
  'https://your-site.netlify.app',   // ‚Üê –ï—Å–ª–∏ –¥—Ä—É–≥–æ–π
  process.env.NETLIFY_SITE_URL,
  process.env.FRONTEND_URL,
].filter(Boolean);
```

**–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω:**
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `backend/src/index.ts`
2. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. Railway/Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç backend

### 4. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

**–ï—Å–ª–∏ backend —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ª–æ–≥–∏–Ω –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç:**

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Railway/Render Shell:
```bash
npm run create-admin admin@example.com admin123 "Admin User"
```

–ò–ª–∏ —á–µ—Ä–µ–∑ API (–µ—Å–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞):
```bash
curl -X POST https://your-backend.railway.app/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@example.com",
    "password": "admin123",
    "full_name": "Admin User",
    "role": "admin"
  }'
```

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:
```bash
npm run migrate
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: API URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω?

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—Ö–æ–¥–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```javascript
console.log(process.env.NEXT_PUBLIC_API_URL)
```

–ï—Å–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `undefined` –∏–ª–∏ `http://localhost:3001` ‚Üí –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤ Netlify.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: Backend –¥–æ—Å—Ç—É–ø–µ–Ω?

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://your-backend.railway.app/api/health
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Üí backend –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: CORS —Ä–∞–±–æ—Ç–∞–µ—Ç?

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) ‚Üí –≤–∫–ª–∞–¥–∫–∞ Network:
- –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `/api/auth/login`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞
- –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ CORS –æ—à–∏–±–∫—É ‚Üí –¥–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω –≤ `allowedOrigins`

## üìù –ß–µ–∫-–ª–∏—Å—Ç

- [ ] Backend —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ `/api/health`)
- [ ] `NEXT_PUBLIC_API_URL` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Netlify
- [ ] –°–∞–π—Ç –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- [ ] Netlify –¥–æ–º–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ CORS –Ω–∞ backend
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω –≤ –ë–î
- [ ] Backend –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∑–∞–ø—Ä–æ—Å—ã

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   - Netlify: Dashboard ‚Üí Functions ‚Üí Logs
   - Railway/Render: Dashboard ‚Üí Logs

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - Netlify: Site settings ‚Üí Environment variables
   - Railway/Render: Service ‚Üí Variables

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL:**
   - Backend URL –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `https://`
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–ª–µ—à–∞ –≤ –∫–æ–Ω—Ü–µ
   - URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞

4. **–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
   - –ú–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å `API_URL` –≤ –∫–æ–¥–µ –Ω–∞ –≤–∞—à backend URL
   - –ù–æ –ª—É—á—à–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üí° –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**Netlify Environment Variables:**
```
NEXT_PUBLIC_API_URL = https://tenderhub-production.up.railway.app
```

**Backend CORS (backend/src/index.ts):**
```typescript
const allowedOrigins = [
  'http://localhost:3000',
  'https://tehnogrupp.netlify.app',
  'https://your-site.netlify.app',
];
```

**Backend URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω:**
```
https://tenderhub-production.up.railway.app/api/health
‚Üí {"status":"ok","timestamp":"..."}
```

