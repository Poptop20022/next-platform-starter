# –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∫–æ–¥–∞ —Å Neon PostgreSQL

## ‚úÖ –ü–æ–ª–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å

–ö–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å Neon PostgreSQL. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã:

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î (`backend/src/db/connection.ts`)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `DATABASE_URL` (connection string)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç SSL –¥–ª—è Neon
- ‚úÖ Fallback –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### 2. –ú–∏–≥—Ä–∞—Ü–∏–∏ (`backend/src/db/migrate.ts`)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç pool –∏–∑ `connection.ts`
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å connection string
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

### 3. –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–∞ (`backend/scripts/create-admin.js`)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `DATABASE_URL`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç SSL –¥–ª—è Neon
- ‚úÖ Fallback –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### 4. –í—Å–µ –º–æ–¥–µ–ª–∏ –∏ —Ä–æ—É—Ç—ã
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç `pool` –∏–∑ `connection.ts`
- ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ –µ–¥–∏–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å Neon

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ Connection string parsing
- ‚úÖ SSL/TLS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- ‚úÖ UUID —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (uuid-ossp)
- ‚úÖ –í—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

1. **–í Railway Variables:**
   ```
   DATABASE_URL = –≤–∞—à-neon-connection-string
   ```

2. **–í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:**
   ```bash
   npm run migrate
   ```

3. **–°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∞:**
   ```bash
   npm run create-admin admin@example.com admin123
   ```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Neon

### Pooler connection
–í–∞—à connection string –∏—Å–ø–æ–ª—å–∑—É–µ—Ç pooler (`-pooler` –≤ URL), —á—Ç–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è:
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- Production –Ω–∞–≥—Ä—É–∑–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—É–ª–æ–º

### SSL –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
Neon —Ç—Ä–µ–±—É–µ—Ç SSL. –ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —ç—Ç–æ –ø–æ:
- `sslmode=require` –≤ connection string
- `neon.tech` –≤ hostname

### –†–∞—Å—à–∏—Ä–µ–Ω–∏—è
Neon –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:
- `uuid-ossp` - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ UUID
- –í—Å–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ PostgreSQL —Ñ—É–Ω–∫—Ü–∏–∏

## –ò—Ç–æ–≥

üéâ **–ö–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ Neon!**

–ü—Ä–æ—Å—Ç–æ:
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `DATABASE_URL` –≤ Railway
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
3. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. –ì–æ—Ç–æ–≤–æ!

